class Prompts:  
    SummarizationPrompt = """Below is an instruction that describes a task, paired with an input that provides further context. Write a response that appropriately completes the request.

### Instruction:
Summarize the given story content in chronological order, focusing the summary on the actions of the relevant characters/speakers. Limit the summary to 100 words or less.

### Input:
Relevant Characters: Character_1, Character_2
Story Content:
```
Character_1 sat at the reception desk of the hospital and let out an exasperated sigh. The golden brown-haired individual ran a hand through his parted brown hair and tapped another impatiently as he stared at the file in front of him. Taking a nearby pen, he signed his name at the bottom of the top page and stared at the hospital entrance anxiously.
It wasn’t long when the subject of his impatience entered the mostly-empty lobby. She was a white-coated individual with a bright orange hair and a heart set on fire for a goal. She walked in with a partner, a person with white attire and a syringe for a symbol. Neither could see the gaze of the individual at the reception desk boring into their skulls, but he could see the skin on the partner’s neck begin to stand upright and itch nervously. After a while, the woman started to look around as nervously as the partner until she finally turned around and saw the dark green eyes of the individual staring at her.
“Ms. Character_2,” Character_1 called. “Could you come over here for a moment? We need to talk.”
The woman hugged the partner, who scurried off down a nearby corridor, before approaching the counter. Character_1 could see her hands were shaking. “Y-yes, sir?”
“I would like to discuss your performance as of late, Character_2,” Character_1 said slowly, letting every word sink in. “When I hired you last year, you were competent and willing to work. As the months have trailed on, however, you’ve been late numerous times and have been spending the majority of your hours on duty in the break room.” He set down the pen he was holding and crossed his arms, placing them on the desk. “Have you anything to say to defend yourself?”
“I… I don’t think I’ve been that late,” Character_2 stuttered. “And I’ve shown up and pulled my fair share.”
```

### Response:
Character_1, a golden brown-haired individual, sat at the reception desk of the hospital, visibly frustrated. He reviewed a file and awaited the arrival of Ms. Character_2, a white-coated individual known for her dedication and a heart-shaped symbol. Upon her arrival with her partner, Character_1 called her over to discuss her recent performance. He expressed concerns about her increasing tardiness and excessive time spent in the break room, despite her initial competence and willingness to work. Character_2, visibly shaken, denied being consistently late and claimed to have fulfilled her duties adequately.

### Input:
Relevant Characters: Character_1, Character_2, Character_3, Character_4
Story Content:
```
Character_1 and the people of the community were currently cleaning up the welcoming party they had for Character_3 and Character_3, they had just gotten into an argument with him about what happened with is whole triple threat problem, despite Character_1's best effort's to solve these problems, it was too much, and it resulted in Character_3 and Character_3 leaving the community, maybe for good.
Character_1 was really upset about this, despite how hard he's tried, it ended up with him possibly losing 2 friends, who are both leaders of they're own communities, so it was just devastating for him to know this, it felt like no matter how hard he tried with it, he couldn't find a way to work it out, and it resulted in something bad happening.
Character_1 was cleaning up most of the decorations that were set up in the community, he was pretty upset about this, he didn't think Character_3 or Character_3 will want to talk to him again after this, and thought they didn't need to have them anymore. Character_1 just tried to think this over the best he could, but he couldn't look at any of it in a positive way, he was just... really upset about this.
"Why couldn't I find something to help? Why didn't I just introduce them to eachother properly? This all could've avoided if I didn't have so much on me.." Character_1 asked himself while looking over the nearly melted ice statue of Character_3, it along with many of the decorations were being taken down by other people, he sighed seeing this, he thought today was just gonna have Character_3 be here, but he forgot that Character_3 was also coming here, so it led to a lot of juggling around he couldn't keep a balance off, and he felt devastated from it.
"Hey Character_1, you okay?" A familiar voice asked which got his attention, he turned around and saw Character_2 had come to check on him, she looked worried for him like he'd expect, and knew he couldn't hide it.
"No, I'm not, all that stuff with Character_3 and Character_3 is just a little much for me right now." Character_1 said turning away from her to continue taking a flyer down.
"Character_1, it's alright, maybe they'll talk it out and make up? You can't just give up on this, after all we've been through, things always get better." Character_2 said trying to keep things in a better move, but Character_1 wasn't having it.
"This is different Character_2, you need to remember what happened, I had over 3 problems to deal with, and it all led to things crashing down, I couldn't find that stupid friendship problem that was caused, I couldn't find a way to introduce Character_3 and Character_3 to eachother in proper ways, they almost got into a fight and they got upset at me for not thinking I could introduce them because of how different they are, it all came crashing downhill Character_2, you know you can't deny that." Character_1 said burning up the fliers to ash while she was worried to hear him like this.
```

### Response:
Character_1, the purple-haired individual, was devastated after failing to resolve the conflict between Character_3 and Character_3, resulting in their departure from the community. He blamed himself for not finding a solution, despite his best efforts. As he cleaned up the decorations from the failed welcoming party, he questioned his actions and wondered if he could have done anything differently. Character_2, his close friend, tried to comfort him, but Character_1 couldn't shake his guilt and sadness. He felt responsible for the situation and believed that he had lost two important friends, leaders of their communities, due to his inability to find a solution to the problems that arose.

### Input:
Relevant Characters: Character_1
Story Content:
```
Character_1 was too old to be running at the speeds she was running. But if she slowed down, they might catch her.
Midwich Valley narrowed as she scrambled across the rough, snow-swept rocks and the vertiginous cliffs above felt even taller than usual, looming high enough to block out the moon. She wasn’t young enough to fly up and over them, not in one go, but she could speed herself up along the ground with small flaps of her arms. So she did, fighting arthritis and the temperature alike to stay alive.
Her breath misted before her as she forced frigid air into her lungs, out of her lungs, in, out, in, out, even though her very diaphragm felt stiff. Her muscles screamed from overwork and her heart was ready to give out. But they’d seen her, she knew they had, so she had to keep moving. Adrenaline didn’t ease the pain, it just made it too easy to ignore. But she didn’t need to keep this up for long. She just needed to reach-
As the opposite walls of the valley met each other in a curve, she saw it: the entrance to the mine, yawning darker than midnight black at Midwich’s apex. Character_1 wanted to take a rest, to ease off for just a few moments, but she couldn’t afford that. She ran into the drift, giving a quick shout of echolocation.
Yet what came back was muddled, messy. Her hearing was beginning to go on the best of days, and now exertion had turned her heart into a drum pounding directly in her ears. Character_1 couldn’t make out enough of the return sounds to get a clear image and she didn’t trust her memory of the mine’s layout. She risked coming to a halt and shouted again. Her ragged breathing made the sound too fuzzy for anything and what she heard back was even worse.
She couldn’t go into the mine. It was too dangerous. She couldn’t leave the mine. It was too dangerous. Panting like a dog, she looked over her shoulder. She couldn’t see them yet, but it was only a matter of time. It had to be. Her lips twitched as she instinctively mouthed out a prayer, a wish, for anything that could help-
Then she saw it. Right at the entrance, glinting in what little starlight there was. A discarded lamp. Which miner had lost it, Character_1 didn’t know. Maybe she had someone looking after her. As usual. She dove, grabbed it, gave it a rattle. Still had some oil (pity it wasn’t a gemmed version). She patted the ground around it, hoping for- Matches. She struck one — in spite of her shakes, she did it on the first try — and tried to light the lamp. And, stars above, the cussed thing caught immediately. It’d give away her position, but that was a risk she had to take; this was the only way she could move forward.
Holding the lamp aloft and murmuring out a prayer of thanks, Character_1 plunged into the mine.
```

### Response:
Character_1, an aging individual, found herself in a desperate situation as she raced through the snow-swept Midwich Valley, trying to escape an unknown pursuer. Despite her age and stiff muscles, she pushed herself to the limit, flapping her arms to increase her speed. As she approached the entrance to a mine at the valley's apex, she realized that she couldn't enter blindly due to her deteriorating hearing and memory. Just when she thought she was out of options, she spotted a discarded lamp, which she quickly grabbed and managed to light. Knowing that it would reveal her position, she made the risky decision to enter the mine, hoping it would provide a safe haven from her pursuers. With the lamp held high and a prayer on her lips, Character_1 ventured into the darkness, determined to survive and find a way to outsmart those chasing her.

### Input:
Relevant Characters: {speakers}
{previous_summary}
Story Content:
```
{prompt}
```

### Response:
"""

    ConversionPrompt = """Below is an instruction that describes a task, paired with an input that provides further context. Write a response that appropriately completes the request.

### Instruction:
You will get:
1. A list of characters in the story so far
2. A summary of the story so far
3. A part of the story
4. Some lines removed from that part of the story

Your task: Use the list, summary, and story part to figure out who said or did the removed lines.

### Input:
List of characters: Character_1, Character_2
Summary: Character_1, working on Character_2's property, waited for his boss while finishing chores. When Character_2 arrived, he gave Character_1 some mail and praised his work on the fence. Character_1, who enjoyed his isolated life, wondered about the need for a holiday. Character_2 mentioned bringing his troubled son to the property, appreciating its lack of distractions. As they looked over the land, Character_1 thought about the potential trouble a skilled rider could get into and the challenges an inexperienced boy might face.
Story Excerpt:
```
Character_1: Character_1 squinted against the sun at the distant dust trail raked up by the car on its way up to the Big House. The horses kicked and flicked their tails at flies, not caring about their owner's first visit in ten months. Character_1 waited. Mr Character_2 didn't come out here unless he had to, which was just fine by Character_1. The more he kept out of his boss's way, the longer he'd have a job.
Character_2: Character_2 came by later while Character_1 was chopping wood. Character_2 lifted his hat as if he were waiting for an appointment with the town priest, and then removed it completely as if he were talking to his mother. He pulled out a pile of paper from his back pocket and held it out.
Character_2: "Don't pick up your mail often, do you?"
Character_1: Character_1 took it without a glance and dropped the envelopes onto the bench.
"Character_1: Never," he replied and waited for Character_2 to say why he was here. The fact it was Character_2's house was no explanation and they both knew it. Character_2 twisted his hat round and round, licking his lips and clearing his throat.
Character_2: "Nice work fixing those fences," he said finally.
Character_1: "I'll be back to the beginning soon," Character_1 said. It wasn't a complaint. A fence that took a year to repair meant another year's work to the man who did it well.
"Don't you ever want to take a holiday?"
"And go where?" A holiday meant being back out in the real world, a place even people like Character_2 travelled to escape from. Character_1's escape was his reality and he wasn't going back.
Mr Character_2 wiped the sweat from the back of his neck. The damp patches on his shirt drew together like shapes in an atlas. His skin was already turning ruddy in the June sun. Otherwise he had the indoor tan of a man that made money while other people did the work.
"I've brought my son with me on this trip. He's had some trouble at school." Mr Character_2's eyes flicked up, blinked rapidly and then shifted back to the hat occupying his hands. "Not much trouble out here for a young boy." He attempted a laugh but it came out like a dog's bark.
The two men looked towards the northern end of the property. It stretched as far as the eye could see. Even the fences were barely visible from where they stood. However bored and rebellious a teenage boy might get, it wasn't possible to escape on foot. Character_1 looked at the biggest of the horses, kicking at the ground with its heavy hooves. Could the boy ride? he wondered. There was a whole load of trouble a good rider could get into out here, miles away from anyone. But maybe there was even more trouble for someone who knew nothing about horses and wanted to get away from his father.
```

Extracted Lines:
Line1: "Don't you ever want to take a holiday?"
Line2: "And go where?" A holiday meant being back out in the real world, a place even people like Character_2 travelled to escape from. Character_1's escape was his reality and he wasn't going back.

Using all the information above, think about:
1. What action or dialogue in the line is the speaker doing/talking about?
2. Who is the line talking to? Is it a group of people or just one person? If the character is unnnamed, use a collective term, for example a group name/species. Use the story excerpt context clues for this.
3. Who said/acted the line based on the story excerpt and by looking for phrases like "Character_1 said" or "Character_2 smiled"

Respond using JSON.

### Response:
{
  "Line1": {
    "action": "Character_2 makes small talk with Character_1",
    "talking_to": "Character_1",
    "speaker": "Character_2"
  },
  "Line2": {
    "action": "Character_1 responds to Character_2's small talk",
    "talking_to": "Character_2",
    "speaker": "Character_1"
  }
}

### Input:
List of characters: {speakers}
Summary: {summary}
Story Excerpt:
```
{excerpt}
```

Extracted Lines:
{extracted_lines}

Using all the information above, think about:
1. What action or dialogue in the line is the speaker doing/talking about?
2. Who is the line talking to? Is it a group of people or just one person? If the character is unnnamed, use a collective term, for example a group name/species. Use the story excerpt context clues for this.
3. Who said/acted the line based on the story excerpt and by looking for phrases like "Character_1 said" or "Character_2 smiled"

Respond using JSON.

### Response:
"""

    ConversionGrammar = """Line1 ::= "{" space Line1-action-kv "," space Line1-talking-to-kv "," space Line1-speaker-kv "}" space
Line1-action-kv ::= "\\"action\\"" space ":" space string
Line1-kv ::= "\\"Line1\\"" space ":" space Line1
Line1-speaker-kv ::= "\\"speaker\\"" space ":" space speakerstring
Line1-talking-to-kv ::= "\\"talking_to\\"" space ":" space string
Line2 ::= "{" space Line2-action-kv "," space Line2-talking-to-kv "," space Line2-speaker-kv "}" space
Line2-action-kv ::= "\\"action\\"" space ":" space string
Line2-kv ::= "\\"Line2\\"" space ":" space Line2
Line2-speaker-kv ::= "\\"speaker\\"" space ":" space speakerstring
Line2-talking-to-kv ::= "\\"talking_to\\"" space ":" space string
Line3 ::= "{" space Line3-action-kv "," space Line3-talking-to-kv "," space Line3-speaker-kv "}" space
Line3-action-kv ::= "\\"action\\"" space ":" space string
Line3-kv ::= "\\"Line3\\"" space ":" space Line3
Line3-speaker-kv ::= "\\"speaker\\"" space ":" space speakerstring
Line3-talking-to-kv ::= "\\"talking_to\\"" space ":" space string
Line4 ::= "{" space Line4-action-kv "," space Line4-talking-to-kv "," space Line4-speaker-kv "}" space
Line4-action-kv ::= "\\"action\\"" space ":" space string
Line4-kv ::= "\\"Line4\\"" space ":" space Line4
Line4-speaker-kv ::= "\\"speaker\\"" space ":" space speakerstring
Line4-talking-to-kv ::= "\\"talking_to\\"" space ":" space string
Line5 ::= "{" space Line5-action-kv "," space Line5-talking-to-kv "," space Line5-speaker-kv "}" space
Line5-action-kv ::= "\\"action\\"" space ":" space string
Line5-kv ::= "\\"Line5\\"" space ":" space Line5
Line5-speaker-kv ::= "\\"speaker\\"" space ":" space speakerstring
Line5-talking-to-kv ::= "\\"talking_to\\"" space ":" space string
char ::= [^"\\\\\\x7F\\x00-\\x1F] | [\\\\] (["\\\\bfnrt] | "u" [0-9a-fA-F]{4})
root ::= "{" space Line1-kv "," space Line2-kv "," space Line3-kv "," space Line4-kv "," space Line5-kv "}" space
space ::= | " " | "\\n" [ \\t]{0,20}
string ::= "\\"" char* "\\"" space
speakerstring ::= {speakers}"""
